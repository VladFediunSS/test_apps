<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Tabs Test</title>
</head>
<body>

  <h1>tabs-test.html</h1>

  <!-- Tabs -->
  <div role="tablist" aria-label="Sample tabs">
    <button
      role="tab"
      id="tab-home"
      aria-selected="true"
      aria-controls="panel-home"
      tabindex="0"
    >
      Home
    </button>

    <button
      role="tab"
      id="tab-menu1"
      aria-selected="false"
      aria-controls="panel-menu1"
      tabindex="-1"
    >
      Menu 1
    </button>

    <button
      role="tab"
      id="tab-menu2"
      aria-selected="false"
      aria-controls="panel-menu2"
      tabindex="-1"
    >
      Menu 2
    </button>
  </div>

  <!-- Panels -->
  <div
    id="panel-home"
    role="tabpanel"
    aria-labelledby="tab-home"
  >
    <h3>HOME</h3>
    <p>Test message</p>
  </div>

  <div
    id="panel-menu1"
    role="tabpanel"
    aria-labelledby="tab-menu1"
    hidden
  >
    <h3>Menu 1</h3>
    <p>Test content 1</p>
  </div>

  <div
    id="panel-menu2"
    role="tabpanel"
    aria-labelledby="tab-menu2"
    hidden
  >
    <h3>Menu 2</h3>
    <p>Test content 2</p>
  </div>

  <!-- Result -->
  <p id="state" data-testid="state">
    State: active tab = Home
  </p>

  <script>
    const tabs = Array.from(document.querySelectorAll('[role="tab"]'));
    const panels = Array.from(document.querySelectorAll('[role="tabpanel"]'));
    const state = document.getElementById("state");

    function activateTab(tab) {
      tabs.forEach(t => {
        t.setAttribute("aria-selected", "false");
        t.tabIndex = -1;
      });

      panels.forEach(p => p.hidden = true);

      const panel = document.getElementById(tab.getAttribute("aria-controls"));

      tab.setAttribute("aria-selected", "true");
      tab.tabIndex = 0;
      panel.hidden = false;
      tab.focus();

      state.textContent = "State: active tab = " + tab.textContent;
    }

    tabs.forEach(tab => {
      tab.addEventListener("click", () => activateTab(tab));

      tab.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          activateTab(tab);
        }
      });
    });
  </script>

</body>
</html>
