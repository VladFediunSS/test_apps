<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Collapsible Test</title>
</head>
<body>

  <h1>collapsible-test.html</h1>

  <p>
  <button id="col-1-btn" aria-expanded="false" aria-controls="col-1">Panel 1</button>
  </p>
  <div id="col-1" hidden>
    <label><input type="checkbox" id="col-1-1" data-testid="col-1-1"> 1.1</label><br>
    <label><input type="checkbox" id="col-1-2" data-testid="col-1-2"> 1.2</label>
  </div>

  <p>
  <button id="col-2-btn" aria-expanded="false" aria-controls="col-2">Panel 2</button>
  </p>   
  <div id="col-2" hidden>
    <label><input type="checkbox" id="col-2-1" data-testid="col-2-1"> 2.1</label><br>
    <label><input type="checkbox" id="col-2-2" data-testid="col-2-2"> 2.2</label>
  </div>

  <p>
  <button id="col-3-btn" aria-expanded="false" aria-controls="col-3">Panel 3</button>
  </p>
  <div id="col-3" hidden>
    <label><input type="checkbox" id="col-3-1" data-testid="col-3-1"> 3.1</label><br>
    <label><input type="checkbox" id="col-3-2" data-testid="col-3-2"> 3.2</label>
  </div>

  <p id="state" data-testid="state">State: none</p>

  <script>
    function setup(btnId, panelId, name) {
      const btn = document.getElementById(btnId);
      const panel = document.getElementById(panelId);
      const state = document.getElementById("state");

      btn.addEventListener("click", () => {
        const open = btn.getAttribute("aria-expanded") === "true";
        btn.setAttribute("aria-expanded", String(!open));
        panel.hidden = open;
        state.textContent = "State: " + (open ? "closed " : "open ") + name;
      });
    }

    setup("col-1-btn", "col-1", "Panel 1");
    setup("col-2-btn", "col-2", "Panel 2");
    setup("col-3-btn", "col-3", "Panel 3");
  </script>

</body>
</html>
