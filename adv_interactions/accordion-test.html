<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Accordion Test</title>
</head>
<body>

  <h1>accordion-test.html</h1>

  <button id="acc-1-btn" aria-expanded="false" aria-controls="acc-1">Section 1</button>
  <div id="acc-1" hidden>
    <label><input type="checkbox" id="acc-1-1" data-testid="acc-1-1"> 1.1</label><br>
    <label><input type="checkbox" id="acc-1-2" data-testid="acc-1-2"> 1.2</label>
  </div>

  <button id="acc-2-btn" aria-expanded="false" aria-controls="acc-2">Section 2</button>
  <div id="acc-2" hidden>
    <label><input type="checkbox" id="acc-2-1" data-testid="acc-2-1"> 2.1</label><br>
    <label><input type="checkbox" id="acc-2-2" data-testid="acc-2-2"> 2.2</label>
  </div>

  <button id="acc-3-btn" aria-expanded="false" aria-controls="acc-3">Section 3</button>
  <div id="acc-3" hidden>
    <label><input type="checkbox" id="acc-3-1" data-testid="acc-3-1"> 3.1</label><br>
    <label><input type="checkbox" id="acc-3-2" data-testid="acc-3-2"> 3.2</label>
  </div>

  <p id="state" data-testid="state">State: none</p>

  <script>
    const items = [
      { btn: "acc-1-btn", panel: "acc-1", name: "Section 1" },
      { btn: "acc-2-btn", panel: "acc-2", name: "Section 2" },
      { btn: "acc-3-btn", panel: "acc-3", name: "Section 3" }
    ];

    function closeAll() {
      items.forEach(i => {
        document.getElementById(i.btn).setAttribute("aria-expanded", "false");
        document.getElementById(i.panel).hidden = true;
      });
    }

    items.forEach(i => {
      const b = document.getElementById(i.btn);
      const p = document.getElementById(i.panel);

      b.addEventListener("click", () => {
        closeAll();
        b.setAttribute("aria-expanded", "true");
        p.hidden = false;
        document.getElementById("state").textContent = "State: open " + i.name;
      });
    });
  </script>

</body>
</html>
